InitializeTest(); % Initialize
    
%% Settings
settings = inputdlg({'winRadius','idxHralickSubFeature'}, 'Settings', [1 25; 1 25], {'1', '1'}); 
if(isempty(settings)) % user clicked the cancel button
    disp('Operation canceled ...');
    return;
else
    [winRadius, status] = str2num(settings{1});  
    assert(status, 'Invalid winRadius value ...');
    [idxHralickSubFeature, status] = str2num(settings{2});  
    assert(status, 'Invalid idxHaralickSubFeature value ...'); 
end


%% Start
I = [...
2.30000000000000, 62.0000000000000, 1.01000000000000, 14.8000000000000; ...
3.50000000000000, 71.7000000000000, 12.1000000000000, 1.59000000000000; ...
49.0000000000000, 88.6000000000000, 1206.00000000000, 1698.00000000000; ...
5.17000000000000, 90.7000000000000, 13.7000000000000, 17.5000000000000];

M = [ ...
    0, 0, 0, 0; ...
	0, 1, 1, 0; ...
	0, 1, 1, 0; ...
	0, 0, 0, 0];

I2 = [...
0, 1.31, 7.59, 21.6, 9.19, 9; ...
1, 2.30, 3.50, 49.0, 5.17, 2; ...
3, 62.0, 71.7, 88.6, 90.7, 4; ...
5, 1.01, 12.1, 1206, 13.7, 6; ...
7, 14.8, 1.59, 1698, 17.5, 8; ...
2, 1948, 1089, 16.8, 1705, 3];    

M2 = [ ...
    0, 0, 0, 0, 0, 0; ...
	0, 1, 1, 1, 1, 0; ...
	0, 1, 1, 1, 1, 0; ...
	0, 1, 1, 1, 1, 0; ...
	0, 1, 1, 1, 1, 0; ...
	0, 0, 0, 0, 0, 0];


%% Start
collage_map1 = compute_CoLlAGe2D(I , winRadius, idxHralickSubFeature, M )
collage_map2 = compute_CoLlAGe2D(I2, winRadius, idxHralickSubFeature, M2)

%% TODO: test with saved values (issneeds input range for radius )
% expected_map1 = [0.9183    0.9183;   0.9183    0.9183];
% expected_map2 = [5.2402    5.5640    5.5640    4.8484;
%                  5.8252    6.2360    6.2360    5.5640;
%                  5.8252    6.2360    6.2360    5.5640;
%                  5.2402    5.8612    5.8612    5.2943];
%              
% assert(collage_map1 == expected_map1, 'Test 1: Fail'); 
% assert(collage_map1 == expected_map1, 'Test 2: Fail'); 
% disp('SUCCESS ...')
